<main class="mdl-layout__content" layout="column" ng-init="getAllCategories();getAllCitiesOfList(); initPreferred(); initializePreferredListing();">
    <div flex class="md-padding">
        <div layout="column" class="md-whiteframe-z5" flex-sm- "100" flex-gt-sm="100" flex-gt-md="100" flex-gt-lg="100" style="margin-top:65px">
            <md-content layout="row">
                <md-content layout="row" flex="70" layout-align="left center" class="border-bottom">
                    <h5 style="margin-left:15px;padding-top: 10px;">PREFERRED LISTING LIST</h5>
                </md-content>
                <md-content layout="row" flex="30"  layout-align="center end" class="border-bottom">
                    <md-input-container style="width:150px;">
                        <label class="glyphicon glyphicon-search" style="color: #666666; font-size: 16px;">Search...</label>
                        <input  ng-model="searchtxt" ng-change="initializePreferredListing()">
                    </md-input-container>
                    
                </md-content>
                
            </md-content>
            <md-content layout="row" layout-align="space-around center">
                <md-content flex ="100" layout="row" layout-align="space-around center">

                    <md-select placeholder="Category" style="width:250px;" ng-model="sel_category" class="sel_category" ng-change="initializePreferredListing()">
                        <md-option ng-value="24" >All Category</md-option>
                        <md-option ng-value="cat.category_id" ng-repeat="cat in categories">{{cat.category}}</md-option>
                    </md-select>
                    <md-select placeholder="City" style="width:250px;" ng-model="sel_city" ng-change="initializePreferredListing()">
                        <md-option ng-repeat="ct in cities">{{ct.city}}</md-option>
                    </md-select>

                    <md-select placeholder="Preference Type" style="width:250px;" ng-model="sel_listing_type" ng-change="initializePreferredListing()">
                        <md-option ng-value="premium">Premium</md-option>
                        <md-option ng-value="featured">Featured</md-option>
                    </md-select>

                    <input style="width:160px" ng-change="initializePreferredListing()" type="date" class="form-control" uib-datepicker-popup="dd/MM/yyyy" ng-model="sel_date" is-open="status.opened" min-date="minDate" max-date="maxDate" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" />
                </md-content>

            </md-content>
            
            <md-content layout-padding>
                <table class="table table-bordered table-striped table-hover preferredList" style="margin-bottom:20px;">
                    <thead>
                        <tr>
                            <th>S. NO.</th>
                            <th>LISTING ID</th>
                            <th>LISTING NAME</th>
                            <th>RANK</th>
                            <th>VALID FROM</th>
                            <th>VALID TO</th>
                            <th>CREATE DATE</th>
                        </tr>
                    </thead>
                    <tbody><!-- infinite-scroll="scrollPreferredListing()" -->
                        <tr ng-repeat="list in all_preferred_listing " >
                            <td class="capitalize">{{$index+1}}</td>
                            <td class="capitalize">{{list.listing_id}}</td>
                            <td class="capitalize">{{list.business_name}}</td>
                            <td class="capitalize">{{list.rank}}</td>
                            <td class="capitalize">{{list.valid_from | date}}</td>
                            <td class="capitalize">{{list.valid_to | date}}</td>
                            <td class="capitalize">{{list.created  | date}}</td>
                        </tr>
                    </tbody>
                </table>
                <div class="infinite-wrapper" ng-show="infiniteLoader">
                    <img src="assets/img/infinite_loader.gif">
                </div>
            </md-content>
        </div>
    </div>
</main>
